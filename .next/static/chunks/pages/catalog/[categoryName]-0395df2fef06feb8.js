(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{1596:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalog/[categoryName]",function(){return r(653)}])},653:function(e,t,r){"use strict";r.r(t),r.d(t,{FILTERS:function(){return F},__N_SSP:function(){return O},default:function(){return z}});var s=r(5893),n=r(9008),i=r.n(n),o=r(7294),a=r(326),l=r(4102),c=r(152),u=r(2310),d=r(9090),h=r(298),f=r.n(h),x=r(5168),p=r(2333),m=r(2788),g=r(3328),_=r.n(g);let j=e=>{let{children:t,...r}=e,n=(0,o.useId)();return(0,s.jsxs)("div",{className:_().checkbox,children:[(0,s.jsx)("input",{id:n,type:"checkbox",...r}),(0,s.jsx)("label",{htmlFor:n,children:t})]})},v=e=>{let{subcategories:t}=e,r=(0,p.CG)(e=>e.filters.subcategory),{dispatchSetFilter:n}=(0,p.BA)({setFilter:m.Tv}),i=(0,o.useMemo)(()=>r.reduce((e,t)=>(e[t]=!0,e),{}),[r]),a=e=>t=>{let s=t.target.checked?[...r,e]:r.filter(t=>t!==e);n({name:"subcategory",value:s})};return t.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Подкатегории"}),t.map(e=>{let{id:t,name:r}=e;return(0,s.jsx)(j,{name:F.SUBCATEGORY,value:t,checked:!!i[t],onChange:a(t),children:r},t)})]}):null};var y=r(1163);let N=e=>{let t=(0,y.useRouter)(),r=(0,o.useMemo)(()=>t.query,[t]),s=(0,o.useMemo)(()=>null==e?void 0:e.reduce((e,t)=>(e[t]=t,e),{}),[e]),n=(0,o.useCallback)(e=>{let n=e;"function"==typeof e&&(n=e(r));let i=Object.keys(n).filter(e=>!(s&&s[e])).reduce((e,t,r,s)=>s.length?e+="".concat(t,"=").concat(n[t]).concat(r!==s.length-1?"&":""):"","");console.log(i);let o="".concat(window.location.pathname).concat(i?"?".concat(i):"");t.push(o)},[r,s]),i=(0,o.useCallback)((e,t)=>{let s=r[e];(t||void 0!==s)&&t!==("string"==typeof s?s:JSON.stringify(s))&&n(r=>{if(!t){let s={...r};return delete s[e],s}return{...r,[e]:t}})},[n,r]);return{setParam:i,params:r,setParams:n}};var b=r(9794);let w=(e,t)=>{if(void 0===e)return[t,!0];try{let r=JSON.parse(e);return[r,!1]}catch(s){return[t,!0]}};var k=r(7389),C=r.n(k);let S=e=>{let t={};for(let r of Object.keys(e)){let s=e[r],n="filter[".concat(r,"]");s=Array.isArray(s)?JSON.stringify(s):s.toString(),t[n]=s}return t},T=e=>{let{subcategories:t}=e,[r,n]=(0,o.useState)(!1),{dispatchSetFilters:i}=(0,p.BA)({setFilters:m.rr}),a=(0,p.CG)(e=>e.filters),{setParams:l,params:c}=N(["categoryName"]),u=(0,o.useMemo)(()=>({subcategory:t.map(e=>e.id)}),[t]),d=()=>{n(!1),l(e=>{let t={...e,...S(a)};return delete t.page,t})},h=()=>{window.location.href="".concat(window.location.origin).concat(window.location.pathname)};return(0,o.useEffect)(()=>{let e=Object.keys(a).reduce((e,t)=>{let r=c["filter[".concat(t,"]")];if(void 0!==r){let s=Array.isArray(a[t]),n="number"==typeof a[t],i=r;s&&(i=w(i,[])[0]),n&&(i=Number(i)),e[t]=i}else u[t]&&(e[t]=u[t]);return e},{});i(e)},[c,u]),(0,s.jsxs)("aside",{className:(0,b.o)([C().aside,r?C().aside_open:void 0]),children:[(0,s.jsxs)("h5",{children:[(0,s.jsx)("span",{children:"Фильтры"}),(0,s.jsx)(x.z,{onClick:()=>n(e=>!e),children:(0,s.jsx)("i",{className:"fa fa-".concat(r?"minus":"plus"),"aria-hidden":"true"})})]}),(0,s.jsx)(v,{subcategories:t}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"d-flex align-items-cetner justify-content-between",children:[(0,s.jsx)(x.z,{onClick:d,sizeMode:"sm",variant:"primary",children:"Применить"}),(0,s.jsx)(x.z,{onClick:h,sizeMode:"sm",bg:"outline-primary",variant:"primary",children:"Сбросить"})]})]})};var A=r(2489),E=r(1471),O=!0;let F={SUBCATEGORY:"filter[subcategory]"},M=e=>{let{category:t,subcategories:r,pagination:n,products:h,newProducts:x}=e,p=(0,E.k)("catalog"),[m,g,_]=(0,o.useMemo)(()=>{let e=[];for(let t=3;t>0;t--)e.push(x.length>3?t:x.length);return[e[0],e[1],e[2]]},[x]),j="Каталог - "+t.name.slice(0,1).toUpperCase()+t.name.slice(1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:j})}),(0,s.jsxs)("section",{className:f().section,children:[p&&(0,s.jsx)(A.a,{}),(0,s.jsx)(l.O,{}),(0,s.jsx)(u.W,{children:(0,s.jsxs)("div",{className:f().main,children:[(0,s.jsx)(T,{subcategories:r}),(0,s.jsxs)("div",{className:f().content,children:[!!x.length&&(0,s.jsxs)("div",{className:"order-lg-0 order-1 mt-lg-0 mt-3",children:[(0,s.jsx)("h3",{className:"text-lg-start text-center",children:"Новинки"}),(0,s.jsx)(d.b,{isNew:!0,products:x,carouselProps:{slidesToShow:m,variableWidth:!0,responsive:[{breakpoint:1200,settings:{slidesToShow:g}},{breakpoint:575,settings:{slidesToShow:_}}]}})]}),(0,s.jsx)("h3",{className:"text-lg-start text-cente mb-2",children:t.fullName}),h.length?(0,s.jsx)("div",{className:f().products,children:h.map(e=>(0,s.jsx)(c.Z,{description:!!e.props,isNew:e.isNew,isHit:e.isHit,product:e},e.id))}):(0,s.jsx)("h4",{className:"mt-3 text-lg-start text-center",children:"Товары не найдены."}),(0,s.jsx)("div",{className:"d-flex justify-content-center mt-3 order-5",children:(0,s.jsx)(a.t,{page:n.page,total:n.total})})]})]})})]})]})};var z=M},5172:function(e,t,r){"use strict";r.d(t,{l:function(){return o}});var s=r(5893),n=r(5168);r(7294);var i=r(6066);let o=e=>{let{children:t,...r}=e,o={infinite:!0,dots:!1,speed:500,slidesToShow:1,slidesToScroll:1,nextArrow:(0,s.jsx)(n.z,{children:"Next"}),prevArrow:(0,s.jsx)(n.z,{children:"Prev"}),...r};return(0,s.jsx)(i.Z,{...o,children:t})}},2489:function(e,t,r){"use strict";r.d(t,{a:function(){return a}});var s=r(5893);r(7294);var n=r(9794),i=r(4898),o=r.n(i);let a=e=>{let{withoutOverlay:t}=e;return(0,s.jsx)("div",{className:(0,n.o)([o().loading,t?void 0:o().overlay]),children:(0,s.jsx)("i",{className:"fa fa-repeat","aria-hidden":"true"})})}},1471:function(e,t,r){"use strict";r.d(t,{k:function(){return i}});var s=r(1163),n=r(7294);let i=e=>{let t=(0,s.useRouter)(),[r,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let r=t=>{t.includes(e)&&i(!0)},s=()=>i(!1);return t.events.on("routeChangeStart",r),t.events.on("routeChangeComplete",s),()=>{t.events.off("routeChangeStart",r),t.events.off("routeChangeComplete",s)}},[t,e]),r}},9090:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var s=r(5893),n=r(7294),i=r(152),o=r(5172);let a=e=>{let{products:t,isNew:r,isHit:a,carouselProps:l}=e,[c,u,d,h]=(0,n.useMemo)(()=>{let e=[];for(let r=4;r>0;r--)e.push(t.length>r?r:t.length);return e},[t]);return(0,s.jsx)(o.l,{slidesToShow:c,autoplay:!0,autoplaySpeed:4e3,responsive:[{breakpoint:991,settings:{slidesToShow:u}},{breakpoint:768,settings:{slidesToShow:d}},{breakpoint:575,settings:{slidesToShow:h}}],...l,children:t.map(e=>(0,s.jsx)("div",{children:(0,s.jsx)(i.Z,{product:e,isNew:!!r,isHit:!!a})},e.id))})}},298:function(e){e.exports={section:"Category_section__QbyzG",main:"Category_main__NVaeA",content:"Category_content__V_fHT",products:"Category_products__K1q2f"}},7389:function(e){e.exports={aside:"Filters_aside__sCMmU",aside_open:"Filters_aside_open__R7qra"}},3328:function(e){e.exports={checkbox:"Checkbox_checkbox___dHmp"}},4898:function(e){e.exports={loading:"Loader_loading___H9TE",show:"Loader_show__YFqMF",rotate:"Loader_rotate__x_v_I",overlay:"Loader_overlay__lKXgr"}}},function(e){e.O(0,[66,232,774,888,179],function(){return e(e.s=1596)}),_N_E=e.O()}]);