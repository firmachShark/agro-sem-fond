(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{1890:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalog/[categoryName]/[productName]",function(){return r(9908)}])},9908:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return K},default:function(){return X}});var s=r(5893),a=r(9008),i=r.n(a),l=r(5675),n=r.n(l),c=r(7294),d=r(130),o=r(5034),u=r(3192),h=r(4102),m=r(2310),p=r(5577),_=r(7833),x=r.n(_);r(2689),r(7968);var j=r(1664),v=r.n(j),f=r(5131),y=r(5168),g=r(2411),N=r(5838),w=r(458),b=r(9794),k=r(275),P=r.n(k);let S=e=>{let{data:t,setPrice:r}=e,a=(0,c.useMemo)(()=>Object.keys(t).map(e=>({title:e+" м.",value:e})),[t]),i=(0,c.useMemo)(()=>Object.keys(t[Object.keys(t)[0]]).map(e=>({title:e+" м.",value:e})),[t]),[l,n]=(0,c.useState)(()=>a[0].value),[d,o]=(0,c.useState)(()=>i[0].value),u=(e,t)=>()=>{switch(e){case"length":n(t);break;case"step":o(t);break;default:return}};return(0,c.useEffect)(()=>{r(t[l][d])},[d,l,r,t]),(0,s.jsxs)("form",{"data-calculator":!0,className:P().calculator,children:[(0,s.jsxs)("div",{className:P().section,children:[(0,s.jsx)("h4",{children:"Длина:"}),(0,s.jsx)("div",{className:P().inputs,children:a.map((e,t)=>{let r="calculator-input-length-".concat(t);return(0,s.jsxs)("div",{className:P().input,children:[(0,s.jsx)("input",{checked:l===e.value,type:"radio",name:"calculator-input-length",id:r,value:e.value,onChange:u("length",e.value)}),(0,s.jsx)("label",{htmlFor:r,children:e.title})]},r)})})]}),(0,s.jsxs)("div",{className:P().section,children:[(0,s.jsx)("h4",{children:"Шаг:"}),(0,s.jsx)("div",{className:P().inputs,children:i.map((e,t)=>{let r="calculator-input-step-".concat(t);return(0,s.jsxs)("div",{className:P().input,children:[(0,s.jsx)("input",{checked:d===e.value,type:"radio",name:"calculator-input-step",id:r,value:e.value,onChange:u("step",e.value)}),(0,s.jsx)("label",{htmlFor:r,children:e.title})]},r)})})]})]})};var C=r(2333),I=r(6772),O=r(129),F=r.n(O),Z=r(9827),M=new class{async getByProductId(e){return(0,Z.hM)("product-reviews?".concat(F().stringify({filters:{product:{id:{$eq:e}}}})))}async addReview(e,t){return Z.Wh.post("product-reviews",{data:{author:t.author,content:t.content,product:{id:e}}})}},R=r(2489),z=r(5926),E=r.n(z),T=r(4337);let A=e=>{let{productId:t,setReviews:r}=e,[a,i]=(0,c.useState)(!1),[l,n]=(0,c.useState)(""),[d,o]=(0,c.useState)(""),[u,h]=(0,c.useState)(!1),[m,p]=(0,c.useState)(!1),[_,x]=(0,c.useState)(!1),j=(0,c.useId)(),v=(0,c.useId)(),f=e=>n(e.target.value),g=e=>{let t=e.target.value;t.length>500&&(t=t.slice(0,500)),o(t)},N=async()=>{if(l.length<2)return p(!0);if(p(!1),d.length<10)return x(!0);x(!1),h(!0);try{let e=await M.addReview(t,{author:l,content:d});if(200===e.status){let s=(0,T.r)(e.data.data);r(e=>Array.isArray(e)?[...e,s]:[s]),w()}}catch(a){console.error(a)}h(!1)},w=()=>{n(""),o(""),p(!1),x(!1),i(!1)};return a?(0,s.jsxs)("div",{className:E().review_form,children:[u&&(0,s.jsx)(R.a,{}),(0,s.jsx)("label",{htmlFor:v,children:"Ваше Имя"}),(0,s.jsx)("input",{value:l,onChange:f,autoFocus:!0,id:v,placeholder:"Имя"}),m&&(0,s.jsx)("p",{className:E().error,children:"Длина имени должна быть больше 2 символов"}),(0,s.jsxs)("label",{htmlFor:j,children:["Ваш отзыв: ",d.length,"/",500]}),(0,s.jsx)("textarea",{id:j,value:d,onChange:g,placeholder:"Отзыв"}),_&&(0,s.jsx)("p",{className:E().error,children:"Длина отзыва должна быть больше 10 символов"}),(0,s.jsx)(y.z,{sizeMode:"sm",variant:"primary",onClick:N,children:"Отправить"}),(0,s.jsx)(y.z,{sizeMode:"sm",variant:"primary",bg:"outline-primary",onClick:w,className:"ms-2",children:"Отмена"})]}):(0,s.jsx)(y.z,{sizeMode:"sm",variant:"primary",onClick:()=>i(!0),children:"Оставить отзыв"})},L=e=>{let{productId:t,isOpen:r}=e,[a,i]=(0,c.useState)(!1),[l,n]=(0,c.useState)(null),d=(0,c.useCallback)(async()=>{if(r&&null===l){i(!0);try{let e=await M.getByProductId(t);n(e)}catch(s){console.log(s)}i(!1)}},[t,r,l]);return(0,c.useEffect)(()=>{d()},[d]),(0,s.jsx)("div",{className:E().wrapper,children:a?(0,s.jsx)("div",{className:E().loader,children:(0,s.jsx)(R.a,{withoutOverlay:!0})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A,{productId:t,setReviews:n}),l&&l.length?l.map(e=>(0,s.jsxs)("div",{className:E().review,children:[(0,s.jsxs)("h6",{children:[e.author," ",(0,s.jsx)("span",{children:new Date(e.createdAt).toLocaleString("ru")})]}),(0,s.jsx)("p",{children:e.content})]},e.id)):(0,s.jsx)("h4",{className:E().not_yet,children:"Отзывов пока нет"})]})})};var W=r(48),Y=r(5371);let J=e=>{let{product:t,products:r}=e,{name:a,images:l,props:_,price:j,description:k,calculator:P}=t,{dispatchOpenModalOrder:O}=(0,C.BA)({openModalOrder:I.ar}),[F,Z]=(0,c.useState)(0),[M,R]=(0,c.useState)(j),[z,E]=(0,c.useState)("description"),T=(0,g._)("cart"),A=T&&!!T[t.id],[J,K]=(0,c.useState)(()=>{var e;let r=N.Y.get("cart");if(!r)return 1;let s=null===(e=r[t.id])||void 0===e?void 0:e.count;return void 0!==s?s:1}),X=(0,c.useMemo)(()=>_?Object.keys(_).filter(e=>_[e].length<=30).slice(0,4).reduce((e,t)=>({...e,[t]:_[t]}),{}):null,[_]),B=e=>{Z(e)},D=()=>{w.Z.add(t.id,{count:J,price:M})},H=()=>{w.Z.remove(t.id),K(1)},U=()=>{O({title:"Купить в один клик",text:"Оставьте заявку и наш менеджер с Вами свяжется!",addons:[{name:"product_id",value:t.price_id.toString()}]})};return(0,c.useEffect)(()=>{Y.Z.add({id:t.id})},[t.id]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"Каталог - ".concat(a)})}),(0,s.jsxs)("section",{className:"pt-0",children:[(0,s.jsx)(h.O,{}),(0,s.jsxs)(m.W,{className:(0,b.o)(["container",x().container]),itemScope:!0,itemType:"http://schema.org/Product",children:[(0,s.jsx)("h3",{className:(0,b.o)([x().title,"ps-0 d-md-none d-block"]),itemProp:"name",children:a}),(0,s.jsxs)("div",{className:x().inner,children:[(0,s.jsx)("div",{children:!!(null==l?void 0:l.length)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{interval:null,activeIndex:F,onSelect:B,indicators:!1,children:l.map((e,t)=>(0,s.jsx)(d.Z.Item,{children:(0,s.jsx)(n(),{itemProp:0===t?"image":"","data-fancybox":a,width:e.width,height:e.height,className:x().carousel_image,src:e.url,alt:a,placeholder:"empty"})},t))}),(0,s.jsx)("div",{className:x().carousel_dots,children:l.map((e,t)=>{let r=l.length>3?100/l.length-2:31;return(0,s.jsx)("div",{className:t===F?x().carousel_dot_active:void 0,style:{width:"".concat(r,"%")},children:(0,s.jsx)(n(),{onClick:()=>B(t),width:e.width,height:e.height,src:e.url,alt:a,placeholder:"empty"})},t)})})]})}),(0,s.jsxs)("div",{className:x().info,children:[(0,s.jsx)("h3",{className:(0,b.o)([x().title,"d-md-block d-none"]),children:a}),(0,s.jsxs)("div",{className:x().on_stock,children:[(0,s.jsx)("span",{children:"В наличии"}),(0,s.jsx)("div",{className:x().buy_btn,children:(0,s.jsx)(y.z,{variant:"orange",onClick:U,children:"Купить в один клик"})}),(0,s.jsxs)("div",{itemProp:"offers",itemScope:!0,itemType:"http://schema.org/Offer",children:[(0,s.jsxs)("strong",{children:[(0,s.jsx)("span",{itemProp:"lowPrice",children:M})," ",(0,s.jsx)("span",{itemProp:"priceCurrency",children:"BYN"}),"/шт"]}),A?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v(),{href:"/cart",children:[(0,s.jsx)("i",{className:"fa fa-check","aria-hidden":"true"}),"В корзине",J>1&&(0,s.jsxs)("b",{children:[" (",J," шт.)"]})]}),(0,s.jsx)(y.z,{variant:"primary",bg:"outline-primary",onClick:H,children:"Убрать"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.P,{value:J,setValue:K}),(0,s.jsx)(y.z,{variant:"primary",onClick:D,children:"В корзину"})]})]})]}),P&&(0,s.jsx)(S,{data:P,setPrice:R}),(0,s.jsxs)("div",{className:x().content,children:[X&&(0,s.jsx)("ul",{className:x().short_props,children:Object.keys(X).map((e,t)=>(0,s.jsxs)("li",{style:{animationDelay:"".concat((t+1)*300,"ms")},children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)("hr",{}),(0,s.jsx)("b",{children:X[e]})]},e))}),(0,s.jsxs)("div",{className:x().delivery,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v(),{href:"/payment",children:"Оплата"}),(0,s.jsx)("p",{children:"банковской картой, электронными деньгами или наложенным платежом"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v(),{href:"/delivery",children:"Удобная доставка"}),(0,s.jsx)("p",{children:"Различные способы доставки на любой вкус"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-md-7 col-12",children:(0,s.jsxs)(o.Z,{id:"product-tabs",className:"mt-3",activeKey:z,onSelect:e=>E(e),children:[(0,s.jsx)(u.Z,{eventKey:"description",title:"Описание",className:x().description,dangerouslySetInnerHTML:{__html:k}}),_&&(0,s.jsx)(u.Z,{eventKey:"params",title:"Характеристики",children:(0,s.jsx)("ul",{className:(0,b.o)([x().short_props,"mw-100"]),children:Object.keys(_).map((e,t)=>(0,s.jsxs)("li",{style:{animationDelay:"".concat(200*t,"ms")},children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)("b",{children:_[e]})]},e))})}),(0,s.jsx)(u.Z,{eventKey:"reviews",title:"Отзывы",children:(0,s.jsx)(L,{isOpen:"reviews"===z,productId:t.id})})]})}),(0,s.jsx)("div",{className:"col-md-5 col-12 pt-5",children:(0,s.jsxs)("form",{className:x().form,children:[(0,s.jsx)("h4",{children:"Оставьте заявку чтобы купить!"}),(0,s.jsx)(W.I,{type:"hidden",value:t.price_id,name:"product_id"}),(0,s.jsx)(W.I,{name:"name",placeholder:"Ваше Имя"}),(0,s.jsx)(W.I,{name:"phone",placeholder:"Ваш Номер",required:!0}),(0,s.jsx)(y.z,{type:"submit",variant:"primary",children:"Отправить"})]})})]})]}),(0,s.jsx)(p.WO,{products:r,isNew:!0,title:"Новинки"})]})]})};var K=!0,X=J},4102:function(e,t,r){"use strict";r.d(t,{O:function(){return d}});var s=r(5893),a=r(1664),i=r.n(a),l=r(7294);let n=e=>decodeURI(e).replaceAll("_"," ");var c=r(2310);let d=e=>{let{replace:t}=e,[r,a]=(0,l.useState)([[],void 0]),[d,o]=r;return(0,l.useEffect)(()=>{let e="/",t=decodeURI(window.location.pathname).split("/").slice(1).map(t=>{let r=e+t+"/";e=r;let s=n(t);return{href:r,name:s}}),r=t.pop();a([t,r])},[t]),(0,s.jsx)(c.W,{children:(0,s.jsx)("nav",{"aria-label":"breadcrumb",children:(0,s.jsxs)("ol",{className:"breadcrumb",children:[(0,s.jsx)("li",{className:"breadcrumb-item",children:(0,s.jsx)(i(),{href:"/",children:"Главная"})}),d.map(e=>(0,s.jsx)("li",{className:"breadcrumb-item",children:(0,s.jsx)(i(),{href:e.href,children:e.name})},e.href)),o&&(0,s.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:o.name})]})})})}},2489:function(e,t,r){"use strict";r.d(t,{a:function(){return n}});var s=r(5893);r(7294);var a=r(9794),i=r(4898),l=r.n(i);let n=e=>{let{withoutOverlay:t}=e;return(0,s.jsx)("div",{className:(0,a.o)([l().loading,t?void 0:l().overlay]),children:(0,s.jsx)("i",{className:"fa fa-repeat","aria-hidden":"true"})})}},5371:function(e,t){"use strict";let r="viewed",s=RegExp("(^| )"+r+"=([^;]+)");t.Z=new class{getFromCookie(e){let t=e||document.cookie,r=t.match(s);return r?this.parseJSON(r[2]):null}parseJSON(e){try{let t=JSON.parse(e);if(!Array.isArray(t))return null;return t}catch(r){return null}}setInCookie(e){let t="";try{t=JSON.stringify(e)}catch(s){return!1}if(!t)return!1;let a=new Date;a.setTime(a.getTime()+2592e6);let i="expires="+a.toUTCString();return document.cookie=r+"="+t+"; "+i+"; path=/",!0}add(e){let t=this.getFromCookie();if(t){let r=t.find(t=>t.id===e.id);if(r)return;t.unshift(e)}this.setInCookie(t||[{id:e.id}])}getAll(){return this.getFromCookie()||[]}clear(){this.setInCookie([])}}},7833:function(e){e.exports={container:"Product_container__HAu8X",inner:"Product_inner__nrQ8a",carousel_image:"Product_carousel_image__NvUp4",carousel_dots:"Product_carousel_dots__hJRZy",carousel_dot_active:"Product_carousel_dot_active__K2Ysb",info:"Product_info__o6hwW",title:"Product_title__lIGwn",on_stock:"Product_on_stock__jjWwG",content:"Product_content__k1Sis",short_props:"Product_short_props__GbY_5",fade:"Product_fade__HX72Y",delivery:"Product_delivery__uilaa",form:"Product_form__WDThY",description:"Product_description__MMCLW"}},275:function(e){e.exports={calculator:"Calculator_calculator__Zhg7z",section:"Calculator_section__LlrdS",inputs:"Calculator_inputs__q7rp1",input:"Calculator_input__ZyXr8"}},4898:function(e){e.exports={loading:"Loader_loading___H9TE",show:"Loader_show__YFqMF",rotate:"Loader_rotate__x_v_I",overlay:"Loader_overlay__lKXgr"}},5926:function(e){e.exports={wrapper:"ProductReview_wrapper__J6Se2",not_yet:"ProductReview_not_yet__IsgUP",review:"ProductReview_review__ZfbHM",loader:"ProductReview_loader__Cdf6d",error:"ProductReview_error__npuBh",review_form:"ProductReview_review_form__P_4e7"}}},function(e){e.O(0,[66,834,339,577,774,888,179],function(){return e(e.s=1890)}),_N_E=e.O()}]);