(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{1596:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalog/[categoryName]",function(){return s(653)}])},653:function(e,t,s){"use strict";s.r(t),s.d(t,{FILTERS:function(){return M},__N_SSP:function(){return E},default:function(){return F}});var r=s(5893),n=s(9008),i=s.n(n),l=s(7294),c=s(326),o=s(4102),a=s(152),d=s(2310),u=s(9090),h=s(298),x=s.n(h),p=s(5168),m=s(2333),f=s(2788),g=s(3328),j=s.n(g);let _=e=>{let{children:t,...s}=e,n=(0,l.useId)();return(0,r.jsxs)("div",{className:j().checkbox,children:[(0,r.jsx)("input",{id:n,type:"checkbox",...s}),(0,r.jsx)("label",{htmlFor:n,children:t})]})},b=e=>{let{subcategories:t}=e,s=(0,m.CG)(e=>e.filters.subcategory),{dispatchSetFilter:n}=(0,m.BA)({setFilter:f.Tv}),i=(0,l.useMemo)(()=>s.reduce((e,t)=>(e[t]=!0,e),{}),[s]),c=e=>t=>{let r=t.target.checked?[...s,e]:s.filter(t=>t!==e);n({name:"subcategory",value:r})};return t.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:"Подкатегории"}),t.map(e=>{let{id:t,name:s}=e;return(0,r.jsx)(_,{name:M.SUBCATEGORY,value:t,checked:!!i[t],onChange:c(t),children:s},t)})]}):null};var y=s(1163);let v=e=>{let t=(0,y.useRouter)(),s=(0,l.useMemo)(()=>t.query,[t]),r=(0,l.useMemo)(()=>null==e?void 0:e.reduce((e,t)=>(e[t]=t,e),{}),[e]),n=(0,l.useCallback)(e=>{let n=e;"function"==typeof e&&(n=e(s));let i=Object.keys(n).filter(e=>!(r&&r[e])).reduce((e,t,s,r)=>r.length?e+="".concat(t,"=").concat(n[t]).concat(s!==r.length-1?"&":""):"","");console.log(i);let l="".concat(window.location.pathname).concat(i?"?".concat(i):"");t.push(l)},[s,r]),i=(0,l.useCallback)((e,t)=>{let r=s[e];(t||void 0!==r)&&t!==("string"==typeof r?r:JSON.stringify(r))&&n(s=>{if(!t){let r={...s};return delete r[e],r}return{...s,[e]:t}})},[n,s]);return{setParam:i,params:s,setParams:n}};var N=s(9794);let w=(e,t)=>{if(void 0===e)return[t,!0];try{let s=JSON.parse(e);return[s,!1]}catch(r){return[t,!0]}};var k=s(7389),C=s.n(k);let S=e=>{let t={};for(let s of Object.keys(e)){let r=e[s],n="filter[".concat(s,"]");r=Array.isArray(r)?JSON.stringify(r):r.toString(),t[n]=r}return t},T=e=>{let{subcategories:t}=e,[s,n]=(0,l.useState)(!1),{dispatchSetFilters:i}=(0,m.BA)({setFilters:f.rr}),c=(0,m.CG)(e=>e.filters),{setParams:o,params:a}=v(["categoryName"]),d=(0,l.useMemo)(()=>({subcategory:t.map(e=>e.id)}),[t]),u=()=>{n(!1),o(e=>{let t={...e,...S(c)};return delete t.page,t})},h=()=>{window.location.href="".concat(window.location.origin).concat(window.location.pathname)};return(0,l.useEffect)(()=>{let e=Object.keys(c).reduce((e,t)=>{let s=a["filter[".concat(t,"]")];if(void 0!==s){let r=Array.isArray(c[t]),n="number"==typeof c[t],i=s;r&&(i=w(i,[])[0]),n&&(i=Number(i)),e[t]=i}else d[t]&&(e[t]=d[t]);return e},{});i(e)},[a,d]),(0,r.jsxs)("aside",{className:(0,N.o)([C().aside,s?C().aside_open:void 0]),children:[(0,r.jsxs)("h5",{children:[(0,r.jsx)("span",{children:"Фильтры"}),(0,r.jsx)(p.z,{onClick:()=>n(e=>!e),children:(0,r.jsx)("i",{className:"fa fa-".concat(s?"minus":"plus"),"aria-hidden":"true"})})]}),(0,r.jsx)(b,{subcategories:t}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"d-flex align-items-cetner justify-content-between",children:[(0,r.jsx)(p.z,{onClick:u,sizeMode:"sm",variant:"primary",children:"Применить"}),(0,r.jsx)(p.z,{onClick:h,sizeMode:"sm",bg:"outline-primary",variant:"primary",children:"Сбросить"})]})]})};var A=s(2489),O=s(1471),E=!0;let M={SUBCATEGORY:"filter[subcategory]"},z=e=>{let{category:t,subcategories:s,pagination:n,products:h,newProducts:p}=e,m=(0,O.k)("catalog"),[f,g,j]=(0,l.useMemo)(()=>{let e=[];for(let t=3;t>0;t--)e.push(p.length>3?t:p.length);return[e[0],e[1],e[2]]},[p]),_="Каталог - "+t.name.slice(0,1).toUpperCase()+t.name.slice(1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:_})}),(0,r.jsxs)("section",{className:x().section,children:[m&&(0,r.jsx)(A.a,{}),(0,r.jsx)(o.O,{}),(0,r.jsx)(d.W,{children:(0,r.jsxs)("div",{className:x().main,children:[(0,r.jsx)(T,{subcategories:s}),(0,r.jsxs)("div",{className:x().content,children:[!!p.length&&(0,r.jsxs)("div",{className:"order-lg-0 order-1 mt-lg-0 mt-3",children:[(0,r.jsx)("h3",{className:"text-lg-start text-center",children:"Новинки"}),(0,r.jsx)(u.b,{isNew:!0,products:p,carouselProps:{slidesToShow:f,variableWidth:!0,responsive:[{breakpoint:1200,settings:{slidesToShow:g}},{breakpoint:575,settings:{slidesToShow:j}}]}})]}),(0,r.jsx)("h3",{className:"text-lg-start text-cente mb-2",children:t.fullName}),h.length?(0,r.jsx)("div",{className:x().products,children:h.map(e=>(0,r.jsx)(a.Z,{description:!!e.props,isNew:e.isNew,product:e},e.id))}):(0,r.jsx)("h4",{className:"mt-3 text-lg-start text-center",children:"Товары не найдены."}),(0,r.jsx)("div",{className:"d-flex justify-content-center mt-3 order-5",children:(0,r.jsx)(c.t,{page:n.page,total:n.total})})]})]})})]})]})};var F=z},5172:function(e,t,s){"use strict";s.d(t,{l:function(){return l}});var r=s(5893),n=s(5168);s(7294);var i=s(6066);let l=e=>{let{children:t,...s}=e,l={infinite:!0,dots:!1,speed:500,slidesToShow:1,slidesToScroll:1,nextArrow:(0,r.jsx)(n.z,{children:"Next"}),prevArrow:(0,r.jsx)(n.z,{children:"Prev"}),...s};return(0,r.jsx)(i.Z,{...l,children:t})}},9090:function(e,t,s){"use strict";s.d(t,{b:function(){return c}});var r=s(5893),n=s(7294),i=s(152),l=s(5172);let c=e=>{let{products:t,isNew:s,carouselProps:c}=e,[o,a,d,u]=(0,n.useMemo)(()=>{let e=[];for(let s=4;s>0;s--)e.push(t.length>s?s:t.length);return e},[t]);return(0,r.jsx)(l.l,{slidesToShow:o,autoplay:!0,autoplaySpeed:4e3,responsive:[{breakpoint:991,settings:{slidesToShow:a}},{breakpoint:768,settings:{slidesToShow:d}},{breakpoint:575,settings:{slidesToShow:u}}],...c,children:t.map(e=>(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{product:e,isNew:!!s})},e.id))})}},298:function(e){e.exports={section:"Category_section__QbyzG",main:"Category_main__NVaeA",content:"Category_content__V_fHT",products:"Category_products__K1q2f"}},7389:function(e){e.exports={aside:"Filters_aside__sCMmU",aside_open:"Filters_aside_open__R7qra"}},3328:function(e){e.exports={checkbox:"Checkbox_checkbox___dHmp"}}},function(e){e.O(0,[66,276,774,888,179],function(){return e(e.s=1596)}),_N_E=e.O()}]);