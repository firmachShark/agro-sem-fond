(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{1890:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalog/[categoryName]/[productName]",function(){return t(9908)}])},9908:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return Y},default:function(){return q}});var a=t(5893),s=t(9008),l=t.n(s),c=t(5675),i=t.n(c),n=t(7294),d=t(130),o=t(5034),u=t(3192),h=t(4102),_=t(2310),m=t(5577),x=t(7833),j=t.n(x);t(2689),t(7968);var p=t(1664),v=t.n(p),f=t(5131),y=t(5168),g=t(2411),N=t(5838),w=t(458),b=t(9794),k=t(275),P=t.n(k);let S=e=>{let{data:r,setPrice:t}=e,s=(0,n.useMemo)(()=>Object.keys(r).map(e=>({title:e+" м.",value:e})),[r]),l=(0,n.useMemo)(()=>Object.keys(r[Object.keys(r)[0]]).map(e=>({title:e+" м.",value:e})),[r]),[c,i]=(0,n.useState)(()=>s[0].value),[d,o]=(0,n.useState)(()=>l[0].value),u=(e,r)=>()=>{switch(e){case"length":i(r);break;case"step":o(r);break;default:return}};return(0,n.useEffect)(()=>{t(r[c][d])},[d,c,t,r]),(0,a.jsxs)("form",{"data-calculator":!0,className:P().calculator,children:[(0,a.jsxs)("div",{className:P().section,children:[(0,a.jsx)("h4",{children:"Длина:"}),(0,a.jsx)("div",{className:P().inputs,children:s.map((e,r)=>{let t="calculator-input-length-".concat(r);return(0,a.jsxs)("div",{className:P().input,children:[(0,a.jsx)("input",{checked:c===e.value,type:"radio",name:"calculator-input-length",id:t,value:e.value,onChange:u("length",e.value)}),(0,a.jsx)("label",{htmlFor:t,children:e.title})]},t)})})]}),(0,a.jsxs)("div",{className:P().section,children:[(0,a.jsx)("h4",{children:"Шаг:"}),(0,a.jsx)("div",{className:P().inputs,children:l.map((e,r)=>{let t="calculator-input-step-".concat(r);return(0,a.jsxs)("div",{className:P().input,children:[(0,a.jsx)("input",{checked:d===e.value,type:"radio",name:"calculator-input-step",id:t,value:e.value,onChange:u("step",e.value)}),(0,a.jsx)("label",{htmlFor:t,children:e.title})]},t)})})]})]})};var C=t(2333),I=t(6772),O=t(129),F=t.n(O),R=t(9827),Z=new class{async getByProductId(e){return(0,R.hM)("product-reviews?".concat(F().stringify({filters:{product:{id:{$eq:e}}}})))}async addReview(e,r){return R.Wh.post("product-reviews",{data:{author:r.author,content:r.content,product:{id:e}}})}},z=t(2489),M=t(5926),E=t.n(M),W=t(4337);let A=e=>{let{productId:r,setReviews:t}=e,[s,l]=(0,n.useState)(!1),[c,i]=(0,n.useState)(""),[d,o]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[_,m]=(0,n.useState)(!1),[x,j]=(0,n.useState)(!1),p=(0,n.useId)(),v=(0,n.useId)(),f=e=>i(e.target.value),g=e=>{let r=e.target.value;r.length>500&&(r=r.slice(0,500)),o(r)},N=async()=>{if(c.length<2)return m(!0);if(m(!1),d.length<10)return j(!0);j(!1),h(!0);try{let e=await Z.addReview(r,{author:c,content:d});if(200===e.status){let a=(0,W.r)(e.data.data);t(e=>Array.isArray(e)?[...e,a]:[a]),w()}}catch(s){console.error(s)}h(!1)},w=()=>{i(""),o(""),m(!1),j(!1),l(!1)};return s?(0,a.jsxs)("div",{className:E().review_form,children:[u&&(0,a.jsx)(z.a,{}),(0,a.jsx)("label",{htmlFor:v,children:"Ваше Имя"}),(0,a.jsx)("input",{value:c,onChange:f,autoFocus:!0,id:v,placeholder:"Имя"}),_&&(0,a.jsx)("p",{className:E().error,children:"Длина имени должна быть больше 2 символов"}),(0,a.jsxs)("label",{htmlFor:p,children:["Ваш отзыв: ",d.length,"/",500]}),(0,a.jsx)("textarea",{id:p,value:d,onChange:g,placeholder:"Отзыв"}),x&&(0,a.jsx)("p",{className:E().error,children:"Длина отзыва должна быть больше 10 символов"}),(0,a.jsx)(y.z,{sizeMode:"sm",variant:"primary",onClick:N,children:"Отправить"}),(0,a.jsx)(y.z,{sizeMode:"sm",variant:"primary",bg:"outline-primary",onClick:w,className:"ms-2",children:"Отмена"})]}):(0,a.jsx)(y.z,{sizeMode:"sm",variant:"primary",onClick:()=>l(!0),children:"Оставить отзыв"})},K=e=>{let{productId:r,isOpen:t}=e,[s,l]=(0,n.useState)(!1),[c,i]=(0,n.useState)(null),d=(0,n.useCallback)(async()=>{if(t&&null===c){l(!0);try{let e=await Z.getByProductId(r);i(e)}catch(a){console.log(a)}l(!1)}},[r,t,c]);return(0,n.useEffect)(()=>{d()},[d]),(0,a.jsx)("div",{className:E().wrapper,children:s?(0,a.jsx)("div",{className:E().loader,children:(0,a.jsx)(z.a,{withoutOverlay:!0})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A,{productId:r,setReviews:i}),c&&c.length?c.map(e=>(0,a.jsxs)("div",{className:E().review,children:[(0,a.jsxs)("h6",{children:[e.author," ",(0,a.jsx)("span",{children:new Date(e.createdAt).toLocaleString("ru")})]}),(0,a.jsx)("p",{children:e.content})]},e.id)):(0,a.jsx)("h4",{className:E().not_yet,children:"Отзывов пока нет"})]})})};var L=t(48);let X=e=>{let{product:r,products:t}=e,{name:s,images:c,props:x,price:p,description:k,calculator:P}=r,{dispatchOpenModalOrder:O}=(0,C.BA)({openModalOrder:I.ar}),[F,R]=(0,n.useState)(0),[Z,z]=(0,n.useState)(p),[M,E]=(0,n.useState)("description"),W=(0,g._)("cart"),A=W&&!!W[r.id],[X,Y]=(0,n.useState)(()=>{var e;let t=N.Y.get("cart");if(!t)return 1;let a=null===(e=t[r.id])||void 0===e?void 0:e.count;return void 0!==a?a:1}),q=(0,n.useMemo)(()=>x?Object.keys(x).slice(0,4).reduce((e,r)=>({...e,[r]:x[r]}),{}):null,[x]),B=e=>{R(e)},D=()=>{w.Z.add(r.id,{count:X,price:Z})},H=()=>{w.Z.remove(r.id),Y(1)},T=()=>{O({title:"Купить в один клик",text:"Оставьте заявку и наш менеджер с Вами свяжется!"})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"Каталог - ".concat(s)})}),(0,a.jsxs)("section",{className:"pt-0",children:[(0,a.jsx)(h.O,{}),(0,a.jsxs)(_.W,{className:(0,b.o)(["container",j().container]),children:[(0,a.jsx)("h3",{className:(0,b.o)([j().title,"ps-0 d-md-none d-block"]),children:s}),(0,a.jsxs)("div",{className:j().inner,children:[(0,a.jsx)("div",{children:!!(null==c?void 0:c.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{interval:null,activeIndex:F,onSelect:B,indicators:!1,children:c.map((e,r)=>(0,a.jsx)(d.Z.Item,{children:(0,a.jsx)(i(),{"data-fancybox":s,width:e.width,height:e.height,className:j().carousel_image,src:e.url,alt:s,placeholder:"empty"})},r))}),(0,a.jsx)("div",{className:j().carousel_dots,children:c.map((e,r)=>{let t=c.length>3?100/c.length-2:31;return(0,a.jsx)("div",{className:r===F?j().carousel_dot_active:void 0,style:{width:"".concat(t,"%")},children:(0,a.jsx)(i(),{onClick:()=>B(r),width:e.width,height:e.height,src:e.url,alt:s,placeholder:"empty"})},r)})})]})}),(0,a.jsxs)("div",{className:j().info,children:[(0,a.jsx)("h3",{className:(0,b.o)([j().title,"d-md-block d-none"]),children:s}),(0,a.jsxs)("div",{className:j().on_stock,children:[(0,a.jsx)("span",{children:"В наличии"}),(0,a.jsx)("div",{className:j().buy_btn,children:(0,a.jsx)(y.z,{variant:"orange",onClick:T,children:"Купить в один клик"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("strong",{children:[(0,a.jsx)("span",{children:Z})," руб./шт"]}),A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v(),{href:"/cart",children:[(0,a.jsx)("i",{className:"fa fa-check","aria-hidden":"true"}),"В корзине",X>1&&(0,a.jsxs)("b",{children:[" (",X," шт.)"]})]}),(0,a.jsx)(y.z,{variant:"primary",bg:"outline-primary",onClick:H,children:"Убрать"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.P,{value:X,setValue:Y}),(0,a.jsx)(y.z,{variant:"primary",onClick:D,children:"В корзину"})]})]})]}),P&&(0,a.jsx)(S,{data:P,setPrice:z}),(0,a.jsxs)("div",{className:j().content,children:[q&&(0,a.jsx)("ul",{className:j().short_props,children:Object.keys(q).map((e,r)=>(0,a.jsxs)("li",{style:{animationDelay:"".concat((r+1)*300,"ms")},children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("hr",{}),(0,a.jsx)("b",{children:q[e]})]},e))}),(0,a.jsxs)("div",{className:j().delivery,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(v(),{href:"/payment",children:"Оплата"}),(0,a.jsx)("p",{children:"банковской картой, электронными деньгами или наложенным платежом"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v(),{href:"/delivery",children:"Удобная доставка"}),(0,a.jsx)("p",{children:"Различные способы доставки на любой вкус"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-md-7 col-12",children:(0,a.jsxs)(o.Z,{id:"product-tabs",className:"mt-3",activeKey:M,onSelect:e=>E(e),children:[(0,a.jsx)(u.Z,{eventKey:"description",title:"Описание",children:k}),x&&(0,a.jsx)(u.Z,{eventKey:"params",title:"Характеристики",children:(0,a.jsx)("ul",{className:(0,b.o)([j().short_props,"mw-100"]),children:Object.keys(x).reverse().map((e,r)=>(0,a.jsxs)("li",{style:{animationDelay:"".concat(200*r,"ms")},children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("hr",{}),(0,a.jsx)("b",{children:x[e]})]},e))})}),(0,a.jsx)(u.Z,{eventKey:"reviews",title:"Отзывы",children:(0,a.jsx)(K,{isOpen:"reviews"===M,productId:r.id})})]})}),(0,a.jsx)("div",{className:"col-md-5 col-12 pt-5",children:(0,a.jsxs)("form",{className:j().form,children:[(0,a.jsx)("h4",{children:"Оставьте заявку чтобы купить!"}),(0,a.jsx)(L.I,{name:"name",placeholder:"Ваше Имя"}),(0,a.jsx)(L.I,{name:"phone",placeholder:"Ваш Номер",required:!0}),(0,a.jsx)(y.z,{type:"submit",variant:"primary",children:"Отправить"})]})})]})]}),(0,a.jsx)(m.WO,{products:t,isNew:!0,title:"Новинки"})]})]})};var Y=!0,q=X},4102:function(e,r,t){"use strict";t.d(r,{O:function(){return o}});var a=t(5893),s=t(1664),l=t.n(s),c=t(7294);let i=e=>decodeURI(e).replaceAll("_"," ");var n=t(2310);let d={catalog:"Каталог",search:"Поиск",cart:"Корзина",delivery:"Доставка",payment:"Оплата",about:"О нас",stock:"Акции",blog:"Блог",faq:"Задать вопрос",galery:"Галерея",garanty:"Гарантия"},o=e=>{let{replace:r}=e,[t,s]=(0,c.useState)([[],void 0]),[o,u]=t;return(0,c.useEffect)(()=>{let e="/",t=decodeURI(window.location.pathname).split("/").slice(1).map(t=>{let a=e+t+"/";e=a;let s=!!(r&&void 0!==r[t]),l=void 0!==d[t],c=s?r[t]:l?d[t]:i(t);return{href:a,name:c}}),a=t.pop();s([t,a])},[r]),(0,a.jsx)(n.W,{children:(0,a.jsx)("nav",{"aria-label":"breadcrumb",children:(0,a.jsxs)("ol",{className:"breadcrumb",children:[(0,a.jsx)("li",{className:"breadcrumb-item",children:(0,a.jsx)(l(),{href:"/",children:"Главная"})}),o.map(e=>(0,a.jsx)("li",{className:"breadcrumb-item",children:(0,a.jsx)(l(),{href:e.href,children:e.name})},e.href)),u&&(0,a.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:u.name})]})})})}},2489:function(e,r,t){"use strict";t.d(r,{a:function(){return i}});var a=t(5893);t(7294);var s=t(9794),l=t(4898),c=t.n(l);let i=e=>{let{withoutOverlay:r}=e;return(0,a.jsx)("div",{className:(0,s.o)([c().loading,r?void 0:c().overlay]),children:(0,a.jsx)("i",{className:"fa fa-repeat","aria-hidden":"true"})})}},7833:function(e){e.exports={container:"Product_container__HAu8X",inner:"Product_inner__nrQ8a",carousel_image:"Product_carousel_image__NvUp4",carousel_dots:"Product_carousel_dots__hJRZy",carousel_dot_active:"Product_carousel_dot_active__K2Ysb",info:"Product_info__o6hwW",title:"Product_title__lIGwn",on_stock:"Product_on_stock__jjWwG",content:"Product_content__k1Sis",short_props:"Product_short_props__GbY_5",fade:"Product_fade__HX72Y",delivery:"Product_delivery__uilaa",form:"Product_form__WDThY"}},275:function(e){e.exports={calculator:"Calculator_calculator__Zhg7z",section:"Calculator_section__LlrdS",inputs:"Calculator_inputs__q7rp1",input:"Calculator_input__ZyXr8"}},4898:function(e){e.exports={loading:"Loader_loading___H9TE",show:"Loader_show__YFqMF",rotate:"Loader_rotate__x_v_I",overlay:"Loader_overlay__lKXgr"}},5926:function(e){e.exports={wrapper:"ProductReview_wrapper__J6Se2",not_yet:"ProductReview_not_yet__IsgUP",review:"ProductReview_review__ZfbHM",loader:"ProductReview_loader__Cdf6d",error:"ProductReview_error__npuBh",review_form:"ProductReview_review_form__P_4e7"}}},function(e){e.O(0,[66,834,339,577,774,888,179],function(){return e(e.s=1890)}),_N_E=e.O()}]);